# セキュリティチェックリスト

## ✅ 実装済み

### 認証
- [x] Google OAuthを使用した安全な認証
- [x] NextAuth.js v5を使用
- [x] セッション管理
- [x] HTTPS接続（Netlify）

### データ保護
- [x] 環境変数で秘密情報を管理
- [x] `.gitignore`で`.env`ファイルを除外
- [x] アクセストークンをJWTで管理

### API
- [x] 認証チェック（未ログインユーザーはAPIにアクセス不可）
- [x] Google Sheets APIアクセスはユーザーのトークンを使用

## 🔒 推奨事項

### 本番環境

1. **環境変数の管理**
   - Netlifyの環境変数は暗号化されて保存されます ✓
   - ローカルの`.env`ファイルは絶対にGitにコミットしない ✓

2. **Google Cloud Console**
   - OAuth同意画面を公開する場合はプライバシーポリシーと利用規約を追加
   - テストモードのままなら最大100人まで安全に使用可能 ✓

3. **スプレッドシート**
   - ユーザーは自分のGoogleアカウントでアクセスするため安全 ✓
   - 各ユーザーは自分のスプレッドシートのみにアクセス可能 ✓

### 今すぐできる改善点

1. **セキュリティヘッダーの追加**（次のステップで実装）
2. **レート制限**（大規模利用時に推奨）
3. **ログの監視**（本番運用時）

## ⚠️ 注意事項

### コンソール警告について
- ブラウザが表示する一般的な警告です
- すべての主要Webサイトで表示されます
- アプリの問題ではありません
- 対処不要です

### ユーザーに対する注意
- コンソールに他人の指示でコードを貼り付けない
- ログイン情報を他人と共有しない
- 信頼できないスプレッドシートIDを入力しない

## 📊 データフローの安全性

```
ユーザー
  ↓ (HTTPS)
Netlify (Next.js)
  ↓ (OAuth)
Google認証
  ↓ (アクセストークン)
Google Sheets API
  ↓
ユーザーのスプレッドシート（ユーザー自身の権限で）
```

すべての通信は暗号化され、ユーザーは自分のGoogleアカウントの権限内でのみ動作します。

## まとめ

**現在の実装は安全です。** 個人利用や小規模なグループでの使用には十分なセキュリティレベルです。
